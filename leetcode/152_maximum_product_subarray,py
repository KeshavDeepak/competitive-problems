class Solution:
    def maxProduct(self, nums: list[int]) -> int:
        previous_product_max = nums[0]
        previous_product_min = nums[0]

        biggest_product_found = nums[0]

        for num in nums[1:]:
            if num <= 0:
                new_min = min(
                    num * previous_product_max,
                    num
                )
                
                previous_product_max = max(
                    num * previous_product_min,
                    num
                )
                
                previous_product_min = new_min
            else:
                previous_product_min = min(
                    num * previous_product_min,
                    num
                )

                previous_product_max = max(
                    num * previous_product_max,
                    num
                )
            
            if max(previous_product_max, previous_product_min) > biggest_product_found:
                biggest_product_found = max(previous_product_max, previous_product_min)
                    
        return biggest_product_found
